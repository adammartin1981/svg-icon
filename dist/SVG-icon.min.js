/**
 * SVG-icon - v0.1.0
 * Copyright (c) 2014 Matt Styles
 * License MIT
 */
!function(a,b){"object"==typeof exports?module.exports=b(require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["lodash","jquery"],b):a.SVGIcon=b(a._,a.$)}(this,function(a,b){function c(a){function b(){var a=function(b){if("object"==typeof b)return a.extend(b,a);var c=document.querySelectorAll(b),e=[];return d.forEach.call(c,function(b){e.push(a.extend(b,a))}),e};return a.extend=function(a){return d.forEach.call(d.slice.call(arguments),function(b){if(b!==a)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},a.replaceWith=function(a){var b=a;"string"==typeof a&&(b=document.createElement("div"),b.innerHTML=a,b=b.firstChild),this.parentElement.replaceChild(b,this)},a.ajax=function(b){b=a.extend({type:"GET",url:""},b);var c={done:function(a){return this.done=a,this},fail:function(a){return this.fail=a,this}},d=new XMLHttpRequest;return d.open(b.type,b.url,!0),d.onload=function(){return 200===d.status?void c.done(d.response,d.status,d):void c.fail()},d.onerror=function(a){c.fail(d,d.status,a)},d.send(),c},a}function c(){return{each:function(a,b,c){if(d.forEach)return d.forEach.call(a,b,c);for(var e=-1,f=a.length;(e+=1)<f&&b.call(c||null,a[e])!==!1;);},extend:function(a){return this.each(d.slice.call(arguments),function(b){if(b!==a)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},find:function(a,b){return this.each(a,function(a){return b(a)===!0?a:void 0}),null}}}var d=Array.prototype,e={jquery:b,lodash:c,"default":function(){console.log("Specified dependency for svg-icon not handled")}};return e[a]?e[a]():e["default"]()}var a=a||c("lodash"),b=b||c("jquery"),d=function(a){d.setOptions(a)};return a.extend(d,function(){var c={selfRegister:!0},d=[],e="./";return{VERSION:"0.1.0",setOptions:function(b){a.extend(c,b)},injectSVG:function(a,c){b(a).replaceWith(c)},inject:function(){if(c.selfRegister){console.log("SVGIcon self registered");var f=b(".icon");a.each(f,function(c){var f=this;if(!c.dataset.src)return void console.error("No URL specified for icon");var g=a.find(d,function(a){return a.id===c.dataset.src});return g?(console.log("loading icon from cache"),void this.injectSVG(c,g.content)):void b.ajax({type:"GET",url:c.dataset.src.match(/^http/)?c.dataset.src:e+c.dataset.src,dataType:"text"}).done(function(a){iconClass=c.dataset.class||"",res=a.replace(/\r?\n|\r/g,"").replace(/<svg/,'<svg class="'+iconClass+'" ').match(/<svg(.*?)svg>/g).toString(),d.push({id:c.dataset.src,content:res}),f.injectSVG(c,res)}).fail(function(a,b,c){console.log("xhr failed",b,c),console.log("Error loading icon",c)})},this)}}}}()),document.addEventListener("DOMContentLoaded",function(){d.inject()}),d});
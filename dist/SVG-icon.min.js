/**
 * SVG-icon - v0.0.2
 * Copyright (c) 2014 Matt Styles
 * License MIT
 */
!function(a,b){"object"==typeof exports?module.exports=b(require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["lodash","jquery"],b):a.SVGIcon=b(a._,a.$)}(this,function(a,b){function c(a){function b(){var a=function(){};return a.ajax=function(){},a}function c(){return{find:function(){}}}var d={jquery:b,lodash:c,"default":function(){console.log("Specified dependency for svg-icon not handled")}};return a?d[a]():void 0}var a=a||c("lodash"),b=b||c("jquery"),d="./",e=null,f=[],g=function(a){g.setOptions(a)};return a.extend(g,function(){var b={selfRegister:!0};return{VERSION:"0.1.0",setOptions:function(c){a.extend(b,c)},injectSVG:function(a,b){a.outerHTML=b},inject:function(){if(b.selfRegister){console.log("SVGIcon self registered");var c=document.querySelectorAll(".icon");a.each(c,a.bind(function(b){if(!b.dataset.src)return void console.error("No URL specified for icon");var c=a.find(f,function(a){return a.id===b.dataset.src});return c?(console.log("loading icon from cache"),void this.injectSVG(b,c.content)):void this.ajax(b,this.injectSVG)},this))}},ajax:function(a,b){var c="";console.log("loading new icon"),e=new XMLHttpRequest,e.open("GET",d+a.dataset.src,!1),e.onload=function(){200===e.status&&(iconClass=a.dataset.class||"",c=e.response.replace(/\r?\n|\r/g,"").replace(/<svg/,'<svg class="'+iconClass+'" ').match(/<svg(.*?)svg>/g),f.push({id:a.dataset.src,content:c}),b(a,c))},e.onerror=function(a){console.error("Error loading icon "),console.error(a)},e.send()}}}()),document.addEventListener("DOMContentLoaded",function(){g.inject()}),g});